<div class="analytics-container">
  <!-- Header -->
  <div class="analytics-header">
    <div class="header-left">
      <h1>ğŸ“Š Website Analytics</h1>
      <p class="subtitle">Monitor your website performance and user behavior</p>
    </div>
    <div class="header-right">
      <select [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()" class="date-range-select">
        <option *ngFor="let range of dateRanges" [value]="range.value">
          {{ range.label }}
        </option>
      </select>
      <button class="btn-refresh" (click)="refreshData()" [disabled]="isLoading">
        ğŸ”„ Refresh
      </button>
      <button class="btn-export" (click)="exportReport()">
        ğŸ“¥ Export
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading analytics data...</p>
  </div>

  <!-- Analytics Content -->
  <div *ngIf="!isLoading" class="analytics-content">
    
    <!-- Realtime Users Badge -->
    <div class="realtime-badge">
      <span class="pulse-dot"></span>
      <span class="realtime-text">{{ analyticsData.realtimeUsers }} users active now</span>
    </div>

    <!-- Overview Cards -->
    <div class="overview-cards">
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘ï¸</div>
        <div class="stat-content">
          <h3>Page Views</h3>
          <p class="stat-value">{{ formatNumber(analyticsData.pageViews) }}</p>
          <span class="stat-label">Total page views</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <h3>Unique Visitors</h3>
          <p class="stat-value">{{ formatNumber(analyticsData.uniqueVisitors) }}</p>
          <span class="stat-label">Individual users</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">â±ï¸</div>
        <div class="stat-content">
          <h3>Avg. Session</h3>
          <p class="stat-value">{{ analyticsData.avgSessionDuration }}</p>
          <span class="stat-label">Time on site</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ğŸ“‰</div>
        <div class="stat-content">
          <h3>Bounce Rate</h3>
          <p class="stat-value">{{ analyticsData.bounceRate }}</p>
          <span class="stat-label">Single page visits</span>
        </div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid">
      
      <!-- Top Pages -->
      <div class="chart-card">
        <div class="card-header">
          <h3>ğŸ“„ Most Visited Pages</h3>
          <span class="badge">Top 6</span>
        </div>
        <div class="chart-content">
          <div class="page-list">
            <div *ngFor="let page of analyticsData.topPages" class="page-item">
              <div class="page-info">
                <span class="page-path">{{ page.page }}</span>
                <span class="page-views">{{ formatNumber(page.views) }} views</span>
              </div>
              <div class="page-bar">
                <div class="page-bar-fill" 
                     [style.width.%]="(page.views / analyticsData.topPages[0].views) * 100">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Events -->
      <div class="chart-card">
        <div class="card-header">
          <h3>âš¡ Top Events</h3>
          <span class="badge">Custom Tracking</span>
        </div>
        <div class="chart-content">
          <div class="event-list">
            <div *ngFor="let event of analyticsData.topEvents" class="event-item">
              <span class="event-icon">{{ getEventIcon(event.event) }}</span>
              <div class="event-details">
                <span class="event-name">{{ event.event }}</span>
                <span class="event-count">{{ formatNumber(event.count) }} times</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Device Breakdown -->
      <div class="chart-card">
        <div class="card-header">
          <h3>ğŸ“± Device Breakdown</h3>
          <span class="badge">User Devices</span>
        </div>
        <div class="chart-content">
          <div class="device-list">
            <div *ngFor="let device of analyticsData.deviceBreakdown" class="device-item">
              <div class="device-header">
                <span class="device-icon">{{ getDeviceIcon(device.device) }}</span>
                <span class="device-name">{{ device.device }}</span>
                <span class="device-percentage">{{ device.percentage }}%</span>
              </div>
              <div class="device-bar">
                <div class="device-bar-fill" [style.width.%]="device.percentage"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Location Data -->
      <div class="chart-card">
        <div class="card-header">
          <h3>ğŸŒ User Locations</h3>
          <span class="badge">Top Countries</span>
        </div>
        <div class="chart-content">
          <div class="location-list">
            <div *ngFor="let location of analyticsData.locationData" class="location-item">
              <span class="country-flag">{{ getCountryFlag(location.country) }}</span>
              <div class="location-details">
                <span class="country-name">{{ location.country }}</span>
                <span class="country-users">{{ formatNumber(location.users) }} users</span>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Info Box -->
    <div class="info-box">
      <div class="info-icon">ğŸ’¡</div>
      <div class="info-content">
        <h4>About This Data</h4>
        <p>
          Analytics data is collected from Google Analytics. 
          <strong>Note:</strong> This is currently showing mock data for demonstration. 
          To see real data, ensure Google Analytics is properly configured with your Measurement ID.
        </p>
        <p class="info-note">
          ğŸ“Œ Data updates automatically. Realtime users refresh every 30 seconds.
        </p>
      </div>
    </div>

  </div>
</div>