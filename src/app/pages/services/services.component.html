<div class="services-container" *transloco="let t; read: 'services'">
  <!-- Hero Section -->
  <section class="services-hero">
    <div class="container">
      <div class="hero-content">
        <h1>{{ t('hero.title') }}</h1>
        <p>{{ t('hero.description') }}</p>
        
        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number">{{ getTotalServices() }}</span>
            <span class="stat-label">{{ t('hero.stats.totalServices') }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ getDigitalServices() }}</span>
            <span class="stat-label">{{ t('hero.stats.digitalServices') }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">24/7</span>
            <span class="stat-label">{{ t('hero.stats.onlineAccess') }}</span>
          </div>
          <div class="stat-item">
            <span class="stat-number">{{ getAverageProcessingTime() }}</span>
            <span class="stat-label">{{ t('hero.stats.avgProcessing') }}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Services -->
  <section class="featured-services" *ngIf="selectedCategory === 'all'">
    <div class="container">
      <h2 class="section-title">{{ t('featured.title') }}</h2>
      <div class="featured-grid">
        <div 
          class="featured-card" 
          *ngFor="let service of getFeaturedServices()"
          (click)="selectService(service)">
          <div class="card-badge">{{ t('featured.popularBadge') }}</div>
          <div class="service-icon">{{ service.icon }}</div>
          <h3>{{ service.name }}</h3>
          <p>{{ service.description }}</p>
          <div class="service-features">
            <span class="feature digital" *ngIf="service.digitalAvailable">üì± {{ t('common.digital') }}</span>
            <span class="feature processing-time">‚è±Ô∏è {{ service.processingTime }}</span>
          </div>
          <div class="service-price">
            <span *ngIf="service.fees.length > 0">{{ t('common.from') }} {{ formatCurrency(service.fees[0].amount) }}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Service Categories -->
  <section class="categories-section">
    <div class="container">
      <h2 class="section-title">{{ t('categories.title') }}</h2>
      <div class="categories-grid">
        <button 
          class="category-btn"
          *ngFor="let category of categories"
          [class.active]="selectedCategory === category.id"
          (click)="selectCategory(category.id)">
          <span class="category-icon">{{ category.icon }}</span>
          <span class="category-name">{{ t('categories.' + category.id) }}</span>
          <span class="service-count" *ngIf="category.id !== 'all'">
            {{ getServicesByCategory(category.id).length }}
          </span>
        </button>
      </div>
    </div>
  </section>

  <!-- Services Grid -->
  <section class="services-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">
          {{ selectedCategory === 'all' ? t('services.allServices') : getCategoryName(selectedCategory) }}
        </h2>
        <p class="services-count">{{ t('services.servicesAvailable', { count: getFilteredServices().length }) }}</p>
      </div>

      <div class="services-grid">
        <div 
          class="service-card"
          *ngFor="let service of getFilteredServices(); trackBy: trackByServiceId"
          [class.expanded]="selectedService?.id === service.id"
          (click)="selectService(service)">
          
          <div class="card-header">
            <div class="service-icon">{{ service.icon }}</div>
            <div class="service-info">
              <h3>{{ service.name }}</h3>
              <p class="service-description">{{ service.description }}</p>
            </div>
            <div class="service-indicators">
              <span class="digital-badge" *ngIf="service.digitalAvailable">{{ t('common.digital') }}</span>
              <span class="expand-arrow" [class.rotated]="selectedService?.id === service.id">‚ñº</span>
            </div>
          </div>

          <!-- Expanded Details -->
          <div class="card-details" *ngIf="selectedService?.id === service.id">
            <div class="details-grid">
              <!-- Fees Section -->
              <div class="detail-section">
                <h4>{{ t('details.fees') }}</h4>
                <div class="fees-list">
                  <div class="fee-item" *ngFor="let fee of service.fees">
                    <span class="fee-description">{{ fee.description }}</span>
                    <span class="fee-amount">
                      {{ formatCurrency(fee.amount) }}
                      <small *ngIf="fee.period">{{ fee.period }}</small>
                    </span>
                  </div>
                </div>
              </div>

              <!-- Requirements Section -->
              <div class="detail-section">
                <h4>{{ t('details.requirements') }}</h4>
                <div class="requirements-list">
                  <div 
                    class="requirement-item" 
                    *ngFor="let req of service.requirements"
                    [class.required]="req.required"
                    [class.optional]="!req.required">
                    <span class="requirement-icon">{{ req.required ? '‚úì' : '‚óã' }}</span>
                    <span class="requirement-text">{{ req.document }}</span>
                    <span class="requirement-status">{{ req.required ? t('details.required') : t('details.optional') }}</span>
                  </div>
                </div>
              </div>

              <!-- Processing Info Section -->
              <div class="detail-section">
                <h4>{{ t('details.information') }}</h4>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="info-label">{{ t('details.processingTime') }}:</span>
                    <span class="info-value">{{ service.processingTime }}</span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">{{ t('details.digitalAvailable') }}:</span>
                    <span class="info-value" [class.available]="service.digitalAvailable" [class.unavailable]="!service.digitalAvailable">
                      {{ service.digitalAvailable ? t('common.yes') : t('common.no') }}
                    </span>
                  </div>
                </div>
              </div>

              <!-- Locations Section -->
              <div class="detail-section">
                <h4>{{ t('details.locations') }}</h4>
                <div class="locations-list">
                  <div class="location-item" *ngFor="let location of service.location">
                    <span class="location-icon">üìç</span>
                    <span class="location-name">{{ location }}</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button class="btn btn-primary" *ngIf="service.digitalAvailable" routerLink="/contact">
                {{ t('actions.applyOnline') }}
              </button>
              <button class="btn btn-secondary" routerLink="/contact">
                {{ t('actions.downloadForms') }}
              </button>
              <button class="btn btn-info" routerLink="/contact">
                {{ t('actions.contactOffice') }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Digital Services CTA -->
  <section class="digital-cta" *ngIf="selectedCategory === 'all'">
    <div class="container">
      <div class="cta-content">
        <div class="cta-text">
          <h3>{{ t('cta.title') }}</h3>
          <p>{{ t('cta.description') }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Help Section -->
  <section class="help-section">
    <div class="container">
      <div class="help-grid">
        <div class="help-card">
          <div class="help-icon">üìû</div>
          <h4>{{ t('help.assistance.title') }}</h4>
          <p>{{ t('help.assistance.description') }}</p>
          <button class="btn btn-outline" routerLink="/contact">{{ t('help.assistance.action') }}</button>
        </div>
        <div class="help-card">
          <div class="help-icon">üìç</div>
          <h4>{{ t('help.offices.title') }}</h4>
          <p>{{ t('help.offices.description') }}</p>
          <button class="btn btn-outline" routerLink="/contact">{{ t('help.offices.action') }}</button>
        </div>
      </div>
    </div>
  </section>
</div>